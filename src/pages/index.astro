---
import Layout from '../layouts/Layout.astro';
import '../styles/form.scss';
import '../styles/swiper.scss';
import { Image } from 'astro:assets';
import call from '../img/discovery-call.webp';
---

<Layout pageTitle="Profile and Work" pageSiteTitles="">
	<section id="about">
		<div class="container btm">
			<div class="flex padding-x align-middle">
				<div class="cell small-18 medium-9">
					<p class="eyebrow">LOCAL • <span class="dark">TRUSTED</span> • RELIABLE</p>
					<h2>Straightforward help with modern digital life.</h2>
					<p>
						<strong>Digital Guide</strong> provides one-on-one practical support for <strong>individuals</strong>, <strong>families</strong>, and <strong>small businesses</strong> who are looking for an
						<strong>easy to understand</strong> approach to configuring and managing the <strong>technical aspects</strong> of your <strong
							>digital files, devices, cloud accounts, data storage,</strong
						> and more... without technical jargon or frustration.
					</p>
				</div>

				<div class="cell small-18 medium-9">
					<div class="lottie-wrapper">
						<lottie-player src="/file-scan.json" background="transparent" speed="0.4" loop autoplay style="width: 100%; height: 100%;"></lottie-player>
					</div>
				</div>
			</div>
		</div>
	</section>

	<section id="who">
		<div class="container btm">
			<div class="flex padding-x align-middle">
				<div class="cell small-18 medium-9 centered">
					<div class="lottie-wrapper">
						<lottie-player class="lottie-cloud" src="/cloud.json" background="transparent" speed="0.4" loop autoplay style="width: 100%; height: 100%;"></lottie-player>
					</div>
				</div>
				<div class="cell small-18 medium-9">
					<p class="eyebrow">MAINTENANCE • <span class="dark">SECURITY</span> • EASE</p>
					<h2>Digital life becomes more complex</h2>
					<p>
						As our reliance on digital devices and cloud services grows, <strong>so does the complexity of managing our digital lives</strong>, despite the claims that technology makes things easier.
						From organizing files across <strong>multiple platforms</strong> to ensuring <strong>data security</strong>, many individuals and small businesses find themselves overwhelmed by the
						technical challenges they face daily.
					</p>
					<p>These challenges build up quietly over time. <strong>Digital Guide</strong> helps make everything <strong>easier to understand, easier to use, and easier to maintain.</strong></p>
				</div>
			</div>
		</div>

		<section id="what">
			<div class="container btm">
				<h2 class="centered">See what small business owners across Canada say about Owlr</h2>

				<div class="swiperslider">
					<!-- <button class="swipernav swipernav--prev" type="button" aria-label="Previous testimonial">
						<span aria-hidden="true">←</span>
					</button>
					<button class="swipernav swipernav--next" type="button" aria-label="Next testimonial">
						<span aria-hidden="true">→</span>
					</button> -->

					<div class="swiper">
						<div class="swiper-wrapper">
							<div class="swiper-slide"></div>

							<div class="swiper-slide">
								<h3>WHAT I DO</h3>

								<p>I provide structured, professional support designed to help you take control of your digital world—at a steady, manageable pace.</p>
								<p>My focus is on:</p>
								<ul>
									<li>
										clarity<li>
											<li>organization</li>
											<li>security</li>
											<li>ease of use</li>
											<li>sustainable habits</li>
										</li>
										<p>This is practical support for real people, delivered with respect and no assumptions about technical ability.</p>
									</li>
								</ul>
							</div>

							<div class="swiper-slide">
								<h3>WHAT I DO</h3>

								<p>I provide structured, professional support designed to help you take control of your digital world—at a steady, manageable pace.</p>
								<p>My focus is on:</p>
								<ul>
									<li>
										clarity<li>
											<li>organization</li>
											<li>security</li>
											<li>ease of use</li>
											<li>sustainable habits</li>
										</li>
										<p>This is practical support for real people, delivered with respect and no assumptions about technical ability.</p>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="services">
			<div class="container btm">
				<div class="flex padding-x align-middle">
					<div class="cell small-18 medium-10">
						<p class="eyebrow">LOCAL • <span class="dark">TRUSTED</span> • RELIABLE</p>
						<h2>Clear, reliable support for navigating your digital world.</h2>

						<h3>WHAT I DO</h3>

						<p>I provide structured, professional support designed to help you take control of your digital world—at a steady, manageable pace.</p>
						<p>My focus is on:</p>
						<ul>
							<li>
								clarity<li>
									<li>organization</li>
									<li>security</li>
									<li>ease of use</li>
									<li>sustainable habits</li>
								</li>
								<p>This is practical support for real people, delivered with respect and no assumptions about technical ability.</p>
							</li>
						</ul>
						<p>
							<strong>Digital Guide</strong> provides one-on-one practical guidance for <strong>individuals</strong>, <strong>families</strong>, and <strong>small businesses</strong> who are looking for
							an
							<strong>easy to understand</strong> approach to managing the <strong>technical aspects</strong> of their <strong>digital life </strong>.
						</p>
					</div>
					<div class="cell small-18 medium-8">
						<div class="lottie-wrapper lottie-wrapper--empty bdr-radius" aria-hidden="true"></div>
					</div>
				</div>
			</div>
		</section>

		<section id="purpose">
			<div class="container">
				<div class="flex padding-x">
					<div class="cell small-18 medium-8">
						<p class="eyebrow">Our Purpose</p>
						<h2>How it works</h2>
						<p>
							Our goal is to help brands unlock their full digital potential by creating impactful marketing strategies that connect, engage, and convert. We believe growth happens when creativity
							meets data and purpose.
						</p>
						<p>Every campaign we launch is built to deliver measurable results and long-term value — combining strategic insights, automation, and human creativity for real impact.</p>
						<div class="purpose-list">
							<div class="purpose-item">
								<div class="purpose-icon">1</div>
								<div>
									<p class="bold">Free 20-minute clarity call</p>
									<p>A relaxed conversation about what feels disorganized and what result you’d like.</p>
								</div>
							</div>
							<div class="purpose-item">
								<div class="purpose-icon">2</div>
								<div>
									<p class="bold">Define the scope</p>
									<p>We decide together what needs attention and how hands-on you want me to be.</p>
								</div>
							</div>
							<div class="purpose-item">
								<div class="purpose-icon">3</div>
								<div>
									<p class="bold">Get everything well sorted</p>
									<p>We work together—or through secure remote sessions—to organize, simplify, and structure your digital world.</p>
								</div>
							</div>
							<div class="purpose-item">
								<div class="purpose-icon">4</div>
								<div>
									<p class="bold">Clear, simple handover</p>
									<p>You receive a clean, easy-to-navigate system and a short guide that explains where everything belongs.</p>
								</div>
							</div>
						</div>
					</div>
					<div class="cell small-18 medium-8">
						<Image src={call} class="bdr-radius" alt="Discovery call illustration" />
					</div>
				</div>
			</div>
		</section>

		<section id="business-support" class="business-support">
			<div class="container top btm">
				<div class="flex padding-x">
					<div class="cell small-18">
						<p class="eyebrow">Features</p>
						<h2 class="support-title">Support for your business from launch to growth</h2>
						<p class="support-subtitle">We’re not just here to help you start, we want to help you thrive. Check out how clients benefit with Owlr beyond registration.</p>

						<!-- <div class="support-tabs" role="tablist" aria-label="Business support stages">
						<button class="support-tab is-active" type="button" role="tab" aria-selected="true">Starting your business</button>
						<button class="support-tab" type="button" role="tab" aria-selected="false">Managing your business</button>
						<button class="support-tab" type="button" role="tab" aria-selected="false">Staying compliant</button>
					</div> -->

						<div class="support-grid">
							<article class="support-card support-card--warm">
								<div class="support-card__content">
									<h3>Shareholder Management</h3>
									<p>Issue and transfer shares with Owlr, generate personalized legal documents and collect all required signatures virtually.</p>
									<a class="btn btn-clear" href="#" aria-label="Learn more about shareholder management">Learn More</a>
								</div>
								<div class="support-card__media">
									<Image src={call} class="bdr-radius" alt="Discovery call illustration" />
								</div>
							</article>

							<article class="support-card support-card--lilac">
								<div class="support-card__content">
									<h3>Legal Document Creation</h3>
									<p>Save time and money by creating custom agreements for your business through Owlr.</p>
									<a class="btn btn-clear" href="#" aria-label="Learn more about legal document creation">Learn More</a>
								</div>
								<div class="support-card__media">
									<Image src={call} class="bdr-radius" alt="Discovery call illustration" />
								</div>
							</article>

							<article class="support-card support-card--sky support-card--wide">
								<div class="support-card__content">
									<h3>Employee and Contractor Management</h3>
									<p>Create tailored contracts and agreements and centralize all employee information.</p>
									<a class="btn btn-clear" href="#" aria-label="Learn more about employee and contractor management">Learn More</a>
								</div>
								<div class="support-card__media">xxxxxx</div>
							</article>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="counter-container">
			<div class="container top btm">
				<div class="flex padding-x">
					<div class="cell small-18">
						<div id="counter">
							<div><p>Average Number of Photos on Phones</p><h4>2,300</h4></div>
							<div><p>Average Number of Photos on Computers</p><h4>2,300</h4></div>
							<div><p>Average Number of Cloud Accounts</p><h4>2,300</h4></div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="pricing-cta" class="pricing-cta">
			<div class="container top btm">
				<div class="flex padding-x align-middle">
					<div class="cell small-18 medium-10">
						<span class="pricing-cta__badge">
							<span class="pricing-cta__badge-icon">$</span>
							Pricing
						</span>
						<h2 class="pricing-cta__title">Register now and become a Sole Proprietor in a few clicks</h2>
						<p class="pricing-cta__subtitle">Fast, friendly setup with everything you need to get started without the stress.</p>
						<a class="btn pricing-cta__button" href="#">Start Your Business</a>
					</div>
					<div class="cell small-18 medium-8">
						<article class="pricing-card">
							<div class="pricing-card__header">
								<h3>Sole Proprietorship Registration Service</h3>
								<p class="pricing-card__price">$49 <span>One-time fee</span></p>
							</div>
							<a class="btn pricing-card__cta" href="#">Start Your Business</a>
							<div class="pricing-card__callout">
								<img
									class="pricing-card__logo"
									src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='24'%3E%3Crect width='60' height='24' rx='6' fill='%232B6CB0'/%3E%3Ctext x='30' y='16' text-anchor='middle' font-size='10' fill='white' font-family='Arial'%3ERBC%3C/text%3E%3C/svg%3E"
									alt="Bank logo placeholder"
								/>
								<p>Save $49 by opening an RBC Business Bank Account. <a href="#">View Terms</a></p>
							</div>
							<div class="pricing-card__list">
								<h4>Includes:</h4>
								<ul>
									<li>Government fees covered by Owlr</li>
									<li>Business name searches</li>
									<li>Business registration number</li>
									<li>Business registration documents</li>
									<li>Owlr perks</li>
									<li>Chat support</li>
								</ul>
							</div>
						</article>
					</div>
				</div>
			</div>
		</section>

		<section id="contact">
			<div class="container top">
				<div class="flex padding-x">
					<div class="cell small-18 medium-18 large-7 small-order-2 medium-order-2 large-order-1">
						<div id="form-container">
							<h2>Contact</h2>
							<p class="margin-btm-med">
								To send a message, please fill out and submit the form below, or send an <a href="mailto:web@jmckean.ca?subject=Inquiry from jmckean.ca" class="underline">email</a>.
							</p>
							<form method="POST" id="form" class="needs-validation" data-astro-reload novalidate>
								<input type="hidden" name="access_key" value="3d4e1ccc-77f5-4fa8-860c-81854fd38d03" />
								<input type="checkbox" class="hidden" style="display:none" name="botcheck" />
								<input type="hidden" name="subject" value="Submission from jmckean.ca" />

								<div>
									<label for="fname" class="visually-hidden">First Name</label>
									<input type="text" name="name" id="first_name" placeholder="Name *" required="" />
									<span class="helperText">Name</span>
									<div class="empty-feedback invalid-feedback">Please provide your first name</div>
								</div>

								<div>
									<label for="email" class="visually-hidden">Email</label>
									<input type="email" name="email" id="email_address" placeholder="Email *" required />
									<span class="helperText">Email</span>
									<div class="empty-feedback text-red-400 text-sm mt-1">Please provide your email address</div>
									<div class="invalid-feedback text-red-400 text-sm mt-1">Please provide a valid email address</div>
								</div>
								<div>
									<label for="message" class="visually-hidden">Comments</label>
									<textarea rows="10" name="message" id="message" placeholder="Comments"></textarea>
									<span class="helperText">Comments</span>
								</div>

								<div class="h-captcha" data-theme="dark" data-captcha="true"></div>
								<div id="result"></div>
								<button type="submit" class="btn arrow">SUBMIT</button>
							</form>
						</div>
					</div>
				</div>
			</div>
		</section>
	</section>

	<script is:inline src="https://web3forms.com/client/script.js" async defer></script>
	<script is:inline src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js" defer></script>

	<script is:inline type="module">
		const initTestimonialsSwiper = (() => {
			let initialized = false;
			return async () => {
				if (initialized) return;
				initialized = true;
				const { default: Swiper } = await import('https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.mjs');

				new Swiper('.swiper', {
					speed: 800,
					spaceBetween: 24,
					centeredSlides: true,
					loop: true,
					navigation: {
						nextEl: '.swipernav--next',
						prevEl: '.swipernav--prev',
					},
					breakpoints: {
						1500: {
							slidesPerView: 3,
						},
						800: {
							slidesPerView: 2,
						},
						0: {
							slidesPerView: 1,
						},
					},
				});
			};
		})();

		if (document.readyState !== 'loading') {
			initTestimonialsSwiper();
		} else {
			document.addEventListener('DOMContentLoaded', initTestimonialsSwiper, { once: true });
		}
		document.addEventListener('astro:page-load', initTestimonialsSwiper);
	</script>

	<style>
		#form-container {
			max-width: 400px;
			margin: 0.5rem 0 0;
		}
		@media (max-width: 1024px) {
			#form-container {
				max-width: 400px;
				margin: 0.5rem auto 0;
			}
		}
		.invalid-feedback,
		.empty-feedback {
			display: none;
		}
		#result {
			color: #ff6000 !important;
		}

		.was-validated :placeholder-shown:invalid ~ .empty-feedback {
			display: block;
			font-size: 1rem;
			margin-bottom: 1.25rem;
			margin-top: -14px;
			text-transform: none;
			font-weight: 200;
		}

		.was-validated :not(:placeholder-shown):invalid ~ .invalid-feedback {
			display: block;
		}

		html.dark .btn:hover {
			background: var(--container-bg-dark);
		}

		.is-invalid,
		.was-validated :invalid {
			border-color: #ff6000;
		}
		.h-captcha iframe {
			width: 100%;
		}
	</style>

	<script is:inline>
		// Main form logic with comments for clarity
		document.addEventListener('astro:page-load', () => {
			const form = document.getElementById('form');
			const result = document.getElementById('result');

			// Helper: Check if form is valid using native HTML validation
			function isFormValid(form) {
				form.classList.add('was-validated');
				return form.checkValidity();
			}

			// Helper: Check if hCaptcha is completed
			function isCaptchaCompleted(form) {
				const hCaptchaInput = form.querySelector('textarea[name=h-captcha-response]');
				return hCaptchaInput && hCaptchaInput.value;
			}

			// Helper: Submit form data via fetch
			async function submitForm(form, result) {
				const formData = new FormData(form);
				const object = Object.fromEntries(formData);
				const json = JSON.stringify(object);

				result.innerHTML = 'Sending...';
				try {
					const response = await fetch('https://api.web3forms.com/submit', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json',
							Accept: 'application/json',
						},
						body: json,
					});
					const data = await response.json();
					result.innerHTML = data.message;
				} catch (error) {
					result.innerHTML = 'Something went wrong!';
				}
				form.reset();
				form.classList.remove('was-validated');
				setTimeout(() => {
					result.style.display = 'none';
				}, 5000);
			}

			// Main submit event handler
			form.addEventListener('submit', function (e) {
				e.preventDefault();

				// 1. Validate form fields
				if (!isFormValid(form)) {
					form.querySelectorAll(':invalid')[0].focus();
					return;
				}

				// 2. Validate hCaptcha
				if (!isCaptchaCompleted(form)) {
					result.innerHTML = 'Please complete the captcha.';
					result.style.color = '#dc3545';
					return;
				}

				// 3. Submit form if all validations pass
				submitForm(form, result);
			});
		});
	</script>
	<script is:inline>
		const formCaptcha = document.getElementById('form');

		formCaptcha.addEventListener('submit', function (e) {
			const hCaptcha = formCaptcha.querySelector('textarea[name=h-captcha-response]').value;

			if (!hCaptcha) {
				e.preventDefault();
				result.innerHTML = 'Please complete the captcha.';
				return;
			}
		});
	</script>

	<script is:inline>
		const initCounters = (() => {
			let initialized = false;
			return () => {
				if (initialized) return;
				initialized = true;
				const counterSection = document.getElementById('counter');
				let animated = false;

				function animateCounters() {
					document.querySelectorAll('#counter h4').forEach((el) => {
						const targetText = el.textContent.replace(/[^0-9+]/g, '');
						const target = parseInt(targetText.replace(/\+/g, ''), 10);
						if (isNaN(target)) return;

						const original = el.innerHTML; // Save original for final format
						const duration = 4000;
						const startTime = performance.now();

						function animate(now) {
							const progress = Math.min((now - startTime) / duration, 1);
							const value = Math.floor(progress * target);
							el.textContent = value.toLocaleString() + (targetText.includes('+') ? '+' : '');
							if (progress < 1) {
								requestAnimationFrame(animate);
							} else {
								el.innerHTML = original; // Restore original format (with <sup> etc.)
							}
						}
						requestAnimationFrame(animate);
					});
				}

				const observer = new IntersectionObserver(
					(entries) => {
						entries.forEach((entry) => {
							if (entry.isIntersecting && !animated) {
								animateCounters();
								animated = true;
								observer.disconnect();
							}
						});
					},
					{ threshold: 0.3 },
				);

				if (counterSection) observer.observe(counterSection);
			};
		})();

		if (document.readyState !== 'loading') {
			initCounters();
		} else {
			document.addEventListener('DOMContentLoaded', initCounters, { once: true });
		}
		document.addEventListener('astro:page-load', initCounters);
	</script>
</Layout>
