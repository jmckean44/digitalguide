---
const pathname = new URL(Astro.request.url).pathname;
const currentPath = pathname.slice(1); // remove first "/"
const currentYear = new Date().getFullYear();
import call from '../img/call.svg';
import '../styles/form.scss';
import { Image } from 'astro:assets';
import icon from '../img/logo-icon-wh.svg';
---

<section id="contact">
	<div class="container top">
		<div class="flex padding-x">
			<div class="cell small-18 medium-18 large-7 small-order-2 medium-order-2 large-order-1">
				<div id="form-container">
					<h2>Contact</h2>
					<p class="margin-btm-med">
						To send a message, please fill out and submit the form below, or send an <a href="mailto:web@jmckean.ca?subject=Inquiry from jmckean.ca" class="underline">email</a>.
					</p>
					<form method="POST" id="form" class="needs-validation" data-astro-reload novalidate>
						<input type="hidden" name="access_key" value="3d4e1ccc-77f5-4fa8-860c-81854fd38d03" />
						<input type="checkbox" class="hidden" style="display:none" name="botcheck" />
						<input type="hidden" name="subject" value="Submission from jmckean.ca" />

						<div>
							<label for="fname" class="visually-hidden">First Name</label>
							<input type="text" name="name" id="first_name" placeholder="Name *" required="" />
							<span class="helperText">Name</span>
							<div class="empty-feedback invalid-feedback">Please provide your first name</div>
						</div>

						<div>
							<label for="email" class="visually-hidden">Email</label>
							<input type="email" name="email" id="email_address" placeholder="Email *" required />
							<span class="helperText">Email</span>
							<div class="empty-feedback text-red-400 text-sm mt-1">Please provide your email address</div>
							<div class="invalid-feedback text-red-400 text-sm mt-1">Please provide a valid email address</div>
						</div>
						<div>
							<label for="message" class="visually-hidden">Comments</label>
							<textarea rows="10" name="message" id="message" placeholder="Comments"></textarea>
							<span class="helperText">Comments</span>
						</div>

						<div class="h-captcha" data-theme="dark" data-captcha="true"></div>
						<div id="result"></div>
						<button type="submit" class="btn arrow">SUBMIT</button>
					</form>
				</div>
			</div>
		</div>
	</div>
</section>

<footer>
	<div class="footer-cta">
		<div class="footer-cta__content">
			<div class="footer-cta__icon" aria-hidden="true">
				<Image src={icon} class="bdr-radius" alt="Discovery call illustration" />
			</div>
			<div class="footer-cta__text">
				<h3>Start your business today!</h3>
				<p>Register your business today and take a huge step toward success.</p>
			</div>
			<a class="footer-cta__button" href="#">Get Started →</a>
		</div>
	</div>
	<div class="container">
		<nav>
			<ul class="nav-links">
				<li class="services">
					<a class={currentPath === 'services/' ? 'active' : ''} href="#services" role="link" aria-label="link to services section" data-astro-reload>Services</a>
				</li>
				<li class="about">
					<a class={currentPath ? 'active' : ''} role="link" aria-label="link to about section" href="#about" data-astro-reload>About</a>
				</li>
				<li class="contact">
					<a class={currentPath === 'about/' ? 'active' : ''} href="#contact" role="link" aria-label="link to contact section" data-astro-reload>Contact</a>
				</li>
				<li class="call">
					<a href="tell:4169861059" role="link" aria-label="book a call link"><Image src={call} class="call" alt="Digital Guide book a call" width="50" height="50" priority /></a>
				</li>
			</ul>
			<div id="copyright">
				<p>© {currentYear} DigitalGuide.ca</p>
			</div>
		</nav>
	</div>

	<script src="../scripts/trig.js"></script>
	<script src="../scripts/scripts.js"></script>
	<script src="../scripts/lenis.js"></script>
</footer>
